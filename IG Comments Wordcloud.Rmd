---
title: "*Scrape* Komentar Instagram & Membuat *Wordcloud* di *R*"
output:
  html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Instagram Comments Scraper

Artikel ini adalah hasil uji coba kombinasi penggunaan **Python** dan **R** untuk melakukan *Text Mining* pada komentar-komentar di Instagram. *Scraping* komentar di Instagram menggunakan `instagram-scraper` di **Python**, selengkapnya bisa dilihat di website berikut <https://github.com/arc298/instagram-scraper>.

Contoh yang digunakan di artikel ini adalah komentar Instagram akun **@kumparancom** dan **@narasinewsroom** pada unggahan/*posting* tentang perintah Pak Jokowi untuk menurunkan harga PCR. Karena output yang dihasilkan dari `instagram-scraper` bentuknya adalah `.json` maka untuk memudahkan pekerjaan di **R** kita akan ambil data yang diperlukan dan diubah bentuk datanya. Berikut adalah package yang diperlukan:
```
magrittr
magicfor
jsonlite
tm
qdapRegex
```
Selanjutnya kita akan panggil data `.json` yang telah tersimpan di folder sebelumnya untuk dilakukan proses ekstraksi data

## EKSTRAKSI DATA

```{r, results='hide', message=FALSE, warning=FALSE}
library(magrittr)
library(magicfor)
library(jsonlite)
library(tm)
library(qdapRegex)
loc1 <- c("C:/Users/User/Desktop/tools/Python/IG Scraper/kumparancom/kumparancom.json")
loc2 <- c("C:/Users/User/Desktop/tools/Python/IG Scraper/narasinewsroom/narasinewsroom.json") 
rslt1<-fromJSON(loc1, flatten=TRUE)
rslt2<-fromJSON(loc2, flatten=TRUE)
str(rslt1);str(rslt2)
rslt.df1<-as.data.frame(rslt1)
rslt.df2<-as.data.frame(rslt2)
kumparan <- rslt.df1[[16]][[21]]; kumparan$sumber <- "@kumparancom"
narasi <- rslt.df2[[16]][[15]]; narasi$sumber <- "@narasinewsroom"
gabung <- rbind(kumparan,narasi)
Timestamp <- gabung$created_at
Username <- gabung$owner.username
Comments <- gabung$text
IG_table1<-cbind(Timestamp,Username,Comments)
```
Berikut adalah contoh hasil ekstraksi data tersebut
``` {r}
library(knitr)
kable(head(IG_table1), caption = "Contoh Hasil Ekstraksi Data")
```

## PREPROCESSING DATA
Pada bagian ini akan dilakukan *preprocessing* data yang mana data tersebut akan "diolah" terlebih dahulu. Berikut adalah tahapannya

**Cleaning**
Untuk membuat *Wordcloud* yang diperlukan hanyalah data **komentar**
```{r}
comment.txt <- IG_table1$Comments
```
Selanjutnya data tersebut akan kita bersihkan, mulai dari menghapus simbol dan angka hingga merubah huruf kapital menjadi kecil

```{r, results='hide', message=FALSE, warning=FALSE}
# remove entities
a11 = gsub("(RT|via)((?:\\b\\W*@\\w+)+)", " ", comment.txt)
# remove at people
a11 = gsub("@\\w+", " ", a11)
# remove emoticon
a11 = iconv(a11,"latin1", 
            "ASCII", sub = " ")
# lower
a11 = tolower(a11)
# remove punctuation
a11 = gsub("[[:punct:]]", " ", a11)
a11 = gsub("[[:punct:]]", " ", a11)
a11 = gsub("[^0-9A-Za-z///' ]","'" , a11 ,ignore.case = TRUE)
a11 = gsub("''","" , a11 ,ignore.case = TRUE)
# remove numbers
a11 = gsub("[[:digit:]]", " ", a11)
# remove html links
a11 = gsub("http\\w+", " ", a11)
```



## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
